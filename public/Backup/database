CREATE TABLE Ordini (
        ID_Ordine INTEGER NOT NULL UNIQUE,
        EmailUtente TEXT NOT NULL,
        Indirizzo TEXT NOT NULL,
        NumeroDiTelefono TEXT NOT NULL,
        Data TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        ID_Prodotto INTEGER NOT NULL,
        Quantita INTEGER NOT NULL,
        Totale REAL NOT NULL,
        PRIMARY KEY(ID_Ordine AUTOINCREMENT),
        FOREIGN KEY(EmailUtente) REFERENCES Utenti(Email),
        FOREIGN KEY(Indirizzo) REFERENCES Utenti(Indirizzo),
        FOREIGN KEY(NumeroDiTelefono) REFERENCES Utenti(NumeroDiTelefono),
        FOREIGN KEY(ID_Prodotto) REFERENCES Prodotti(ID)
    );

    CREATE TABLE Carrello (
        EmailUtente TEXT,
        SessionID TEXT NOT NULL,
        ID_Prodotto INTEGER NOT NULL,
        Quantita INTEGER NOT NULL,
        PRIMARY KEY(EmailUtente, SessionID, ID_Prodotto),
        FOREIGN KEY(EmailUtente) REFERENCES Utenti(Email),
        FOREIGN KEY(ID_Prodotto) REFERENCES Prodotti(ID)
    );

    CREATE TABLE Prodotti (
        ID INTEGER NOT NULL UNIQUE,
        Nome TEXT NOT NULL UNIQUE,
        Prezzo REAL NOT NULL,
        Quantita INTEGER NOT NULL,
        Categoria TEXT NOT NULL,
        Disponibile BOOLEAN NOT NULL DEFAULT 1,
        Immagine TEXT NOT NULL,
        Descrizione TEXT NOT NULL,
        PRIMARY KEY(ID AUTOINCREMENT)
    );

    CREATE TABLE Utenti (
        Email TEXT NOT NULL UNIQUE,
        Password TEXT NOT NULL,
        Nome TEXT NOT NULL,
        Cognome TEXT NOT NULL,
        Indirizzo TEXT NOT NULL,
        NumeroDiTelefono TEXT NOT NULL,
        AccessoSpeciale BOOLEAN NOT NULL DEFAULT 0,
        PRIMARY KEY(Email)
    );